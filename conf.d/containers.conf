<source>
  type tail
  format json
  time_key time
  path /mnt/log/containers/*.log
  pos_file /mnt/pos/ggcp-containers.log.pos
  time_format %Y-%m-%dT%H:%M:%S.%NZ
  tag containers.*
  read_from_head false
</source>

<match containers.**>
  type record_reformer
  enable_ruby true
  tag kubernetes.${tag_suffix[4].split('-')[0..-2].join('-')}
</match>

# Using filter to add container IDs to each event
#<filter docker.var.lib.docker.containers.*.*.log>
#  type record_transformer
#  <record>
#    container_id ${tag_parts[5]}
#  </record>
#</filter>
